<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.project.itda.dailyquestion.dao.IDailyQuestionRepository">

	<select id="findUnusedQuestions" resultType="com.project.itda.dailyquestion.model.DailyQuestionModel">
		<![CDATA[
			SELECT * FROM DailyQuestion
			WHERE DailyQuestionSeq NOT IN
			<foreach item="dailyQuestionSeq" collection="usedQuestionIds" open="(" separator="," close=")">
				#{dailyQuestionSeq}
			</foreach>
			ORDER BY dailyQuestionSeq ASC
			LIMIT #{limit}	
		]]>
	</select>
	
	<insert id="insertQuestion" parameterType="com.project.itda.dailyquestion.model.DailyQuestionModel">
		<![CDATA[
			INSERT INTO 
				DAILYQUESTION (DAILYQUESTIONSEQ, QUESTION, TYPE, FAMILYSEQ) 
			VALUES 
				(dailyquestionseq.next_val, #{question}, #{type}, #{familySeq})
		]]>
	</insert>
	
	
</mapper>